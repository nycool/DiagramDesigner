<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:at="clr-namespace:DiagramDesigner.AttachedProperties"
    xmlns:c="clr-namespace:DiagramDesigner.Controls"
    xmlns:cvt="clr-namespace:DiagramDesigner.Converters"
    xmlns:cmt="clr-namespace:DiagramDesigner.Custom"
    xmlns:ss="clr-namespace:DiagramDesigner.StyleSelectors">

    <!--  ToolBox  -->
    <Style TargetType="{x:Type cmt:ToolBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type cmt:ToolBox}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Expander Header="Symbols" IsExpanded="True">
                            <ItemsControl ItemsSource="{TemplateBinding ToolBoxItemsSource}">
                                <ItemsControl.Template>
                                    <ControlTemplate TargetType="{x:Type ItemsControl}">
                                        <Border
                                            Padding="{TemplateBinding Control.Padding}"
                                            Background="{TemplateBinding Panel.Background}"
                                            BorderBrush="{TemplateBinding Border.BorderBrush}"
                                            BorderThickness="{TemplateBinding Border.BorderThickness}"
                                            SnapsToDevicePixels="True">
                                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                                            </ScrollViewer>
                                        </Border>
                                    </ControlTemplate>
                                </ItemsControl.Template>
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel
                                            Margin="0,5,0,5"
                                            ItemHeight="50"
                                            ItemWidth="50" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemContainerStyle>
                                    <Style TargetType="{x:Type ContentPresenter}">
                                        <Setter Property="Control.Padding" Value="10" />
                                        <Setter Property="ContentControl.HorizontalContentAlignment" Value="Stretch" />
                                        <Setter Property="ContentControl.VerticalContentAlignment" Value="Stretch" />
                                        <Setter Property="ToolTip" Value="{Binding ToolTip}" />
                                        <Setter Property="at:DragAndDropProps.EnabledForDrag" Value="True" />
                                    </Style>
                                </ItemsControl.ItemContainerStyle>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Image
                                            Width="50"
                                            Height="50"
                                            IsHitTestVisible="True"
                                            Source="{Binding ImageUrl, Converter={x:Static cvt:ImageUrlCvt.Instance}}"
                                            Stretch="Fill" />
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Expander>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type cmt:DiagramView}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type cmt:DiagramView}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <ScrollViewer
                                Name="DesignerScrollViewer"
                                Background="Transparent"
                                HorizontalScrollBarVisibility="Auto"
                                VerticalScrollBarVisibility="Auto">
                                <ItemsControl ItemContainerStyleSelector="{x:Static ss:DesignerItemsStyleSelector.Instance}" ItemsSource="{TemplateBinding DiagramItemsSource}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <c:DesignerCanvas
                                                x:Name="Canvas"
                                                MinWidth="1000"
                                                MinHeight="800"
                                                AllowDrop="True"
                                                Background="White" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                </ItemsControl>
                            </ScrollViewer>
                            <c:ZoomBox
                                x:Name="zoomBox"
                                Width="180"
                                Margin="0,5,25,0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"
                                DesignerCanvas="{Binding ElementName=Canvas}"
                                ScrollViewer="{Binding ElementName=DesignerScrollViewer}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>